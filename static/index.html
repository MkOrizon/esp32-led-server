<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M.K IOT HUB - LED Control</title>

    <style>
        body {
            background: #0f141a;
            font-family: "Segoe UI", sans-serif;
            text-align: center;
            padding-top: 60px;
            color: #d9e2ec;
        }

        h1 {
            font-size: 34px;
            margin-bottom: 5px;
        }

        h2 {
            margin-top: 0;
            font-size: 18px;
            color: #9aa5b1;
        }

        /* Modern Power Button */
        .power-btn {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            border: none;
            background: #1c232b;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;

            box-shadow: 
                0 0 20px rgba(255,0,0,0),
                inset 0 0 10px #000;

            transition: 0.25s ease-in-out;
        }

        /* Power icon */
        .power-btn svg {
            width: 90px;
            height: 90px;
            stroke-width: 8px;
            stroke-linecap: round;
            transition: 0.25s;
        }

        /* LED OFF look */
        .off svg {
            stroke: #6b7c93;
        }

        /* LED ON look */
        .on {
            box-shadow: 
                0 0 25px rgba(0,255,85,0.7),
                0 0 60px rgba(0,255,85,0.5),
                inset 0 0 20px rgba(0,255,85,0.4);
        }

        .on svg {
            stroke: #00ff55;
        }

        .status {
            margin-top: 30px;
            font-size: 22px;
            font-weight: bold;
        }
    </style>

    <script>
        async function loadState() {
            const res = await fetch("/state");
            const data = await res.json();
            updateUI(data.status);
        }

        async function toggleLED() {
            const res = await fetch("/toggle", { method: "POST" });
            const data = await res.json();
            updateUI(data.status);
        }

        function updateUI(status) {
            const btn = document.getElementById("powerBtn");
            const stateText = document.getElementById("stateText");

            if (status === "on") {
                btn.classList.remove("off");
                btn.classList.add("on");
                stateText.innerHTML = "LED Status: <span style='color:#00ff55;'>ON</span>";
            } else {
                btn.classList.remove("on");
                btn.classList.add("off");
                stateText.innerHTML = "LED Status: <span style='color:#ff3b3b;'>OFF</span>";
            }
        }

        window.onload = loadState;
    </script>
</head>

<body>
    <h1>M.K IOT HUB</h1>
    <h2>Cloud LED Controller</h2>

    <button id="powerBtn" class="power-btn off" onclick="toggleLED()">
        <!-- Power Icon -->
        <svg viewBox="0 0 24 24">
            <path d="M12 2 L12 12" />  <!-- vertical line -->
            <path d="M7 7 A5 5 0 1 0 17 7" /> <!-- arc -->
        </svg>
    </button>

    <div class="status" id="stateText">Checking LED state...</div>
</body>
</html>
