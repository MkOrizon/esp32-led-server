<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M.K IOT HUB - LED Control</title>

    <style>
        body {
            background: #e0e5ec;
            font-family: "Segoe UI", sans-serif;
            text-align: center;
            padding-top: 70px;
            color: #444;
        }

        h1 {
            font-size: 32px;
            color: #333;
        }

        h2 {
            margin-top: -10px;
            color: #666;
            font-weight: 400;
        }

        /* Neumorphic Button */
        .button {
            background: #e0e5ec;
            border: none;
            padding: 25px 45px;
            font-size: 24px;
            border-radius: 50px;
            cursor: pointer;
            width: 260px;

            box-shadow: 
                8px 8px 16px #b8bec7,
                -8px -8px 16px #ffffff;

            transition: 0.2s;
        }

        .button:active {
            box-shadow: 
                inset 8px 8px 16px #b8bec7,
                inset -8px -8px 16px #ffffff;
            transform: scale(0.98);
        }

        .status {
            margin-top: 35px;
            font-size: 24px;
            font-weight: bold;
            color: #555;
        }

    </style>

    <script>
        async function loadState() {
            const res = await fetch("/state");
            const data = await res.json();
            updateUI(data.status);
        }

        async function toggleLED() {
            const res = await fetch("/toggle", {
                method: "POST"
            });
            const data = await res.json();
            updateUI(data.status);
        }

        function updateUI(status) {
            const btn = document.getElementById("ledBtn");
            const stateText = document.getElementById("stateText");

            if (status === "on") {
                btn.innerHTML = "Turn OFF";
                btn.style.color = "#d00000";
                stateText.innerHTML = "LED Status: <span style='color:#d00000'>ON</span>";
            } else {
                btn.innerHTML = "Turn ON";
                btn.style.color = "#007f0e";
                stateText.innerHTML = "LED Status: <span style='color:#007f0e'>OFF</span>";
            }
        }

        window.onload = loadState;
    </script>
</head>

<body>
    <h1>M.K IOT HUB</h1>
    <h2>Neumorphic LED Cloud Controller</h2>

    <button id="ledBtn" class="button" onclick="toggleLED()">Loading...</button>

    <div class="status" id="stateText">Checking LED state...</div>
</body>
</html>
